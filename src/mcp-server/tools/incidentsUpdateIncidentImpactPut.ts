/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { incidentsUpdateIncidentImpactPut } from "../../funcs/incidentsUpdateIncidentImpactPut.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: operations.UpdateIncidentImpactPutRequest$inboundSchema,
};

export const tool$incidentsUpdateIncidentImpactPut: ToolDefinition<
  typeof args
> = {
  name: "incidents-update-incident-impact-put",
  description: `Update impacts for an incident

Allows updating an incident's impacted infrastructure, with the option to
move the incident into a different milestone and provide a note to update
the incident timeline and any attached status pages. If this method is
requested with the PUT verb, impacts will be completely replaced with the
information in the request body, even if not provided (effectively clearing
all impacts). If this method is requested with the PATCH verb, the provided
impacts will be added or updated, but no impacts will be removed.
`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await incidentsUpdateIncidentImpactPut(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
