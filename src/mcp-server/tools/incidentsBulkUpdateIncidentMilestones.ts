/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { incidentsBulkUpdateIncidentMilestones } from "../../funcs/incidentsBulkUpdateIncidentMilestones.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: operations.BulkUpdateIncidentMilestonesRequest$inboundSchema,
};

export const tool$incidentsBulkUpdateIncidentMilestones: ToolDefinition<
  typeof args
> = {
  name: "incidents-bulk-update-incident-milestones",
  description: `Update milestone times

Update milestone times in bulk for a given incident. All milestone
times for an incident must occur in chronological order
corresponding to the configured order of milestones. If the result
of this request would cause any milestone(s) to appear out of place,
a 422 response will instead be returned. This includes milestones
not explicitly submitted or updated in this request.
`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await incidentsBulkUpdateIncidentMilestones(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
